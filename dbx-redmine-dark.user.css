/* ==UserStyle==
@name           Redmine Dark
@namespace      redmine.dbx.hu.dark
@version        1
@description    Dark Mode for DBX Redmine with tweaks
@author         Gemini
@preprocessor   less

@var color accent-base-color "Theme Accent Color" #00a2ff

@var checkbox enable-sliding-sidebar "Enable Auto-hide Sliding Sidebar" 1
@var select sidebar-tab-style "Sidebar Tab Style" {
  "text": "Text with Icon",
  "icon": "Icon Only"
}

@var color status-1-color "Status: New" #1485f4
@var color status-2-color "Status: Assigned" #0d71de
@var color status-3-color "Status: Resolved" #2c9c16
@var color status-4-color "Status: Feedback" #c913c9
@var color status-5-color "Status: Closed" #525151
@var color status-6-color "Status: Rejected" #e03030
@var color status-7-color "Status: Ready for test" #2bff00
@var color status-44-color "Status: Waiting for deploy" #0fe17c
@var color status-46-color "Status: In progress" #c4d404
@var color status-47-color "Status: Ready for delivery" #ff9933
@var color status-48-color "Status: Waiting" #76785d
@var color status-51-color "Status: Waiting for review" #ff005f
@var color status-52-color "Status: Review done" #bffc4d
@var color status-53-color "Status: Waiting for customer" #785d78
@var color status-55-color "Status: Specification" #06dfe3

@var color status-28-color "MARS: FejlesztÃ©s alatt" #c54614
@var color status-29-color "MARS: PontosÃ­tÃ¡s szÃ¼ksÃ©ges" #e0a020
@var color status-31-color "MARS: JavÃ­tva" #2baa1e
@var color status-32-color "MARS: TesztelhetÅ‘" #5fdd00
@var color status-33-color "MARS: MABISZ lezÃ¡rta" #4a7a55
@var color status-34-color "MARS: MABISZ nem fogadja el" #a51515
@var color status-35-color "MARS: DuplikÃ¡lt" #8a6a9a
@var color status-36-color "MARS: Nem reprodukÃ¡lhatÃ³" #757575
@var color status-37-color "MARS: DBX lezÃ¡rta" #4a6a7a
@var color status-39-color "MARS: ElemzÃ©s alatt" #3a8fdd
@var color status-43-color "Ã‰lesÃ­tÃ©s utÃ¡n ellenÅ‘rizendÅ‘" #137ff3
@var color status-50-color "Ã‰lesÃ­tÃ©sre vÃ¡r" #20c4a0

@var color priority-low-color "Priority: Low" #11a6b3
@var color priority-normal-color "Priority: Normal" #08c78d
@var color priority-high-color "Priority: High" #d16500
@var color priority-urgent-color "Priority: Urgent" #ec014f
@var color priority-immediate-color "Priority: Immediate" #c3d100

==/UserStyle== */
@-moz-document domain("redmine.dbx.hu") {

  // =================================================================
  // 1. CORE DARK MODE VARIABLES
  // =================================================================
  @rm-bg-main: #121212;
  @rm-bg-primary: #121212;
  @rm-bg-secondary: #1e1e1e;
  @rm-bg-tertiary: #2d2d2d;
  @rm-bg-header: #242424;
  @rm-text-primary: #e0e0e0;
  @rm-text-secondary: #cfcfcf;
  @rm-text-muted: #aaaaaa;
  @rm-border: #585858;
  @rm-input-bg: #2a2a2a;
  @rm-highlight: #3a3a3a;

  // Accent colors derived from base
  @rm-accent: @accent-base-color;
  @rm-link: lighten(@accent-base-color, 25%);
  // =================================================================
  // 2. GENERIC REDMINE DARK THEME
  // =================================================================
  /* Global Resets */
  body,
  #wrapper,
  #main,
  #content {
    background-color: @rm-bg-main !important;
    color: @rm-text-primary !important;
  }
  a,
  a:link,
  a:visited,
  .user.active {
    color: @rm-link !important;
  }
  h2,
  h3,
  h4 {
    color: @rm-text-primary;
  }
  hr {
    border-color: @rm-border !important;
    background-color: @rm-border !important;
  }
  #content,
  .tab-content {
    border-color: @rm-border !important;
  }
  /* Headers & Layout */
  #top-menu {
    background: #000000 !important;
    > * {
      margin-top: 2px;
    }
    > ul {
      margin-top: 2px;
      display: flex;
      li {
        float: none !important;
      }
    }
  }

  #header {
    background-color: @rm-bg-header !important;
    border-bottom: 1px solid @rm-border !important;
  }
  #footer {
    background-color: @rm-bg-secondary !important;
    border-top: 1px solid @rm-border !important;
  }

  /* Main Menu */
  #main-menu {
    li {
      a {
        background-color: #373636;
        color: #b8b8b8 !important;
        border-color: @rm-border;
        font-weight: normal;
        transition: all 0.15s ease;

        &:hover {
          background: lighten(@rm-accent, 10%);
          color: #ffffff !important;
          border-color: lighten(@rm-accent, 5%);
          text-decoration: none;
        }

        &.selected {
          background: darken(@rm-accent, 15%);
          color: lighten(@rm-accent, 45%) !important;
          border-color: lighten(@rm-accent, 5%);
          font-weight: bold;
          text-shadow: 1px 1px 3px rgba(0,0,0,0.3);
          &:hover {
            background: lighten(@rm-accent, 10%);
            color: #ffffff !important;
            border-color: lighten(@rm-accent, 20%);
            font-weight: bold;
          }
        }
        &.new-object {
          background-color: #195229;
          color: #24ff00 !important;
          font-weight: bold;
          font-size: 13px !important;
          &:hover {
            background-color: #239f47;
            border-color: #3ab863;
          }
        }
      }
    }

    .menu-children {
      background-color: @rm-bg-secondary;
      border-color: @rm-border;

      li {
        a {
          color: #b8b8b8;
          background-color: #1e1e1e;
          transition: all 0.15s ease;

          &:hover {
            color: #ffffff;
            background-color: darken(@rm-accent, 10%);
          }
        }
      }
    }

    .tabs-buttons {
      background-color: transparent;
      border-bottom-color: transparent;
    }
  }

  /* Generic Boxes & Wiki */
  .box,
  .wiki pre,
  .wiki code {
    background-color: @rm-bg-secondary !important;
    color: @rm-text-primary !important;
    border-color: @rm-border !important;
  }
  .wiki pre {
    border: 1px solid @rm-border !important;
  }


  /* Tables - Fixing the white borders and headers */
  table.list,
  table.list th,
  .table-list-header {
    background-color: @rm-bg-tertiary !important;
    border-color: @rm-border !important;
    color: @rm-text-primary !important;
  }
  table.list td,
  table.list tr {
    border-color: @rm-border !important;
  }
  tr.odd,
  .odd {
    background-color: @rm-bg-secondary !important;
  }
  tr.even,
  .even {
    background-color: @rm-bg-main !important;
  }
  table.list tbody tr:hover {
    background-color: @rm-highlight !important;
  }

  /* The specific "group" headers that were white */
  tr.group td {
    background-color: mix(@rm-accent, @rm-bg-secondary, 0%) !important;
    color: @rm-link !important;
    //border-bottom: 1px solid @rm-border !important;
    border: none !important;
    padding-top: 0.9rem !important;
    padding-bottom: 0.9rem !important;
    padding-left: 8px;
    .expander {
      margin-right: 9px;
    }
  }
  .gantt_subjects div > span.expander {
    padding-left: 120px;
  }

  /* Issue Details */
  .issue {
    background: @rm-bg-secondary !important;
    border: 1px solid @rm-border !important;

    padding: 2px 5px;
  }
  .issue .attributes {
    background-color: #262626 !important;
    /* Slightly different shade for contrast */
  }
  .issue .attributes th {
    color: @rm-text-muted !important;
  }
  .parent .issue {
    white-space: nowrap;
  }

  /* Forms & Inputs */
  input[type="text"],
  input[type="password"],
  textarea,
  select {
    background-color: @rm-input-bg !important;
    color: @rm-text-primary !important;
    border: 1px solid @rm-border !important;
  }

  /* Checkboxes */
  input[type="checkbox"] {

    appearance: none;
    -webkit-appearance: none;
    -moz-appearance: none;
    width: 14px !important;
    height: 14px !important;
    min-width: 14px !important;
    min-height: 14px !important;
    max-width: 14px !important;
    max-height: 14px !important;
    background-color: @rm-input-bg !important;
    border: 1px solid @rm-border !important;
    border-radius: 3px;
    cursor: pointer;
    position: relative;
    transition: background-color 0.15s ease, border-color 0.15s ease;
    vertical-align: middle;
    margin: 0;
    padding: 0;
    flex-shrink: 0;
    display: inline-block;

    &:hover {
      border-color: lighten(@rm-border, 20%) !important;
      background-color: lighten(@rm-input-bg, 10%) !important;
    }

    &:checked {
      background-color: darken(@rm-accent, 15%) !important;
      border-color: lighten(@rm-accent, -10%) !important;

      &::after {
        content: "";
        position: absolute;
        left: 4px;
        top: 0px;
        width: 3px;
        height: 7px;
        border: solid white;
        border-width: 0 2px 2px 0;
        transform: rotate(45deg);
      }
    }

    &:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
  }

  /* Radio buttons */
  input[type="radio"] {
    appearance: none;
    -webkit-appearance: none;
    -moz-appearance: none;
    width: 16px;
    height: 16px;
    background-color: @rm-input-bg !important;
    border: 2px solid @rm-border !important;
    border-radius: 50%;
    cursor: pointer;
    position: relative;
    transition: all 0.15s ease;

    &:hover {
      border-color: lighten(@rm-border, 20%) !important;
      background-color: lighten(@rm-input-bg, 5%) !important;
    }

    &:checked {
      border-color: @rm-accent !important;

      &::after {
        content: "";
        position: absolute;
        width: 8px;
        height: 8px;
        background-color: @rm-accent;
        border-radius: 50%;
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%);
      }
    }

    &:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
  }

  fieldset {
    border-color: @rm-border !important;
  }
  /* Fix for Select options often staying white in some browsers */
  option {
    background-color: @rm-bg-main;
    color: @rm-text-primary !important;
  }

  /* Tabs */
  #content .tabs {
    margin-bottom: 0 !important;
    ul {
      border-color: @rm-border !important;

      li {
        margin-bottom: -0.96px; // hack for 150% zoom
        a {
          background-color: @rm-bg-secondary !important;
          border-color: @rm-border !important;
          color: @rm-text-muted !important;
          &.selected {
            background-color: @rm-bg-main !important;
            border-bottom: 1px solid @rm-bg-main !important;
            color: @rm-text-primary !important;
          }
        }
      }
      li:has(.selected) {

      }
    }
  }

  .badge {
    padding: 2px 5px;
    &.badge-count {
      color:white !important;
      background: mix(@rm-link, black, 60%);
    }
  }

  // release period
  .cf_70.attribute .value {
    display: inline-block;
    padding: 2px 4px;
    color: #1aff8d;
    text-shadow: 0 0 2px #00ff80;
    border: 1px solid #38ff9c;
    border-radius: 3px;
    background: #07341e;
  }

  //=================================================================
  // 3. CUSTOMIZATIONS FOR DARK MODE)
  // =================================================================

  .colorStatus(@statusId, @color, @factor: 1) {
    @d1: 40%;
    @d2: 30% * @factor;
    @l1: 12% * @factor;
    @l2: 20% * @factor;

    // Table row styling (scoped to issues list)
    .issues.list .status-@{statusId} {
      background-color: darken(desaturate(@color, @d1), @d2) !important;
      color: lighten(@color, @l1) !important;

      * {
        color: lighten(@color, @l1) !important;
      }

      a {
        color: lighten(@color, @l2) !important;
        font-weight: bold;
      }
      /*
      td {
        border-color: darken(desaturate(@color, @d1), @d2) !important;
      }
      */
    }

    // Select dropdown option styling (global scope)
    select#issue_status_id option[value="@{statusId}"] {
      background-color: darken(desaturate(@color, @d1), @d2) !important;
      color: lighten(@color, @l1) !important;
      font-weight: bold;
    }
  }

  .recolor-cell(@statusClass, @color, @cell1, @cell2: ~"", @cell3: ~"", @cell4: ~"") {
    tr.@{statusClass} td.@{cell1},
    tr.@{statusClass} td.@{cell2},
    tr.@{statusClass} td.@{cell3},
    tr.@{statusClass} td.@{cell4} {
      background-color: darken(desaturate(@color, 40%), 30%) !important;
      color: lighten(@color, 12%) !important;
      /*border-color: darken(desaturate(@color, 40%), 23%) !important;*/
      * {
        color: lighten(@color, 12%) !important;
      }
    }
  }

  // =================================================================
  // Status Colors (applied to both issue list tables and dropdowns)
  // =================================================================

  // Regular workflow statuses
  .colorStatus(1, @status-1-color, 1.1); // New
  .colorStatus(2, @status-2-color, 1.2); // Assigned
  .colorStatus(46, @status-46-color); // In progress
  .colorStatus(4, @status-4-color); // Feedback
  .colorStatus(48, @status-48-color); // Waiting
  .colorStatus(53, @status-53-color); // Waiting for customer
  .colorStatus(51, @status-51-color); // Waiting for review
  .colorStatus(52, @status-52-color); // Review done
  .colorStatus(3, @status-3-color, 1); // Resolved
  .colorStatus(44, @status-44-color); // Waiting for deploy
  .colorStatus(7, @status-7-color); // Ready for test
  .colorStatus(47, @status-47-color); // Ready for delivery
  .colorStatus(6, @status-6-color); // Rejected
  .colorStatus(5, @status-5-color); // Closed
  .colorStatus(55, @status-55-color); // Specification

  // MARS workflow statuses
  .colorStatus(28, @status-28-color); // MARS - FejlesztÃ©s alatt (Development in progress)
  .colorStatus(29, @status-29-color); // MARS - PontosÃ­tÃ¡s szÃ¼ksÃ©ges (Clarification needed)
  .colorStatus(31, @status-31-color); // MARS - JavÃ­tva (Fixed)
  .colorStatus(32, @status-32-color); // MARS - TesztelhetÅ‘ (Testable)
  .colorStatus(33, @status-33-color); // MARS - MABISZ lezÃ¡rta (MABISZ closed)
  .colorStatus(34, @status-34-color); // MARS - MABISZ nem fogadja el (MABISZ rejected)
  .colorStatus(35, @status-35-color); // MARS - DuplikÃ¡lt (Duplicated)
  .colorStatus(36, @status-36-color); // MARS - Nem reprodukÃ¡lhatÃ³ (Not reproducible)
  .colorStatus(37, @status-37-color); // MARS - DBX lezÃ¡rta (DBX closed)
  .colorStatus(39, @status-39-color); // MARS - ElemzÃ©s alatt (Under analysis)
  .colorStatus(50, @status-50-color); // Ã‰lesÃ­tÃ©sre vÃ¡r (Waiting for production)
  .colorStatus(43, @status-43-color); // Ã‰lesÃ­tÃ©s utÃ¡n ellenÅ‘rizendÅ‘ (To be verified after production)

  // =================================================================
  // Issues List Table Styles
  // =================================================================

  .issues.list {
    .recolor-cell(priority-lowest,  @priority-low-color, checkbox, id, tracker, priority); // 3 / Low
    .recolor-cell(priority-default, @priority-normal-color, checkbox, id, tracker, priority); // 4 / Normal
    .recolor-cell(priority-high3,   @priority-high-color, checkbox, id, tracker, priority); // 5 / High
    .recolor-cell(priority-high2,   @priority-urgent-color, checkbox, id, tracker, priority); // 6 / Urgent
    .recolor-cell(priority-highest, @priority-immediate-color, checkbox, id, tracker, priority); // 7 / Immediate
    /* Column width tweaks preserved */
    td.project,
    td.fixed_version {
      max-width: 100px;
      overflow: hidden;
    }
    td {
      white-space: nowrap;
      font-weight: bold;
      border: none;

    }
    tr {
      &:hover {
        td {
          border: none;
          box-shadow: 0 0 0 200px fade(@rm-accent, 30%) inset;
        }
      }
    }

    tr.tracker-22 td {
      //box-shadow: 0 0 10px 0 black inset !important;

    }
  }

  /* Custom Journal Style preserved & darkened */
  .journal {
    margin: 0 5px;

    opacity: 0.7;
    .note-header {
      margin-bottom: 2px;
    }
    &:first-child {

    }
    > div {
      padding: 5px 10px;
    }
    &.has-notes {
      opacity: 1; // Dark mode specific overrides for active journals
      > div {
        background: @rm-bg-secondary !important;
        box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.5);
        border: 1px solid @rm-border;
        border-radius: 4px;
        margin: 15px 5px;
        padding: 10px 10px;
      }
    }
    border-radius: 4px;
    .details {
      margin: 0 !important;
    }
  }

  .tab-content {
    padding-top: 1rem !important;
  }

  #history {
    .journal {

      &:has(div:target),
      &:is(div:target){
        background-color: #40163e !important;
        border-color:  #8d2e8a;
        h4.note-header {
          background-color: transparent;
        }
      }
    }
  }

  /* Wiki Images preserved */
  div.wiki img {
    max-width: 480px;
    margin: 10px;
  }

  /* Sliding Sidebar */

  // Mixin: Sidebar disabled - hide it
  .sidebar-disabled() when (@enable-sliding-sidebar = 0) {
    #sidebar {
      display: none !important;
    }
  }
  .sidebar-disabled();

  // Mixin: Sidebar enabled with default text tab
  .sidebar-enabled() when (@enable-sliding-sidebar = 1) {
    #sidebar {
      position: fixed;
      top: 0;
      bottom: 0;
      width: 310px;
      left: 100%;
      z-index: 100;
      overflow-x: visible !important;
      transition: 0.3s;
      border-left: 2px solid @rm-border;
      background-color: @rm-bg-secondary !important;

      &:before {
        content: "ðŸž€ LekÃ©rdezÃ©sek";
        padding: 5px;
        background: @rm-border;
        border-top-left-radius: 4px;
        border-bottom-left-radius: 4px;
        border: 1px solid @rm-border;
        position: absolute;
        top: 65px;
        left: -103px;
        width: 90px;
        z-index: 101;
        cursor: pointer;
        color: @rm-text-primary;
      }

      &:hover {
        transition: 0.1s;
        left: ~"calc(100% - 305px)";
        width: 305px;
        box-shadow: -5px 0 15px rgba(0, 0, 0, 0.5);
      }

      h3 {
        color: @rm-text-secondary !important;
      }

      .queries {
        li a {
          display: block;
          padding: 5px 10px;
          border-radius: 5px;
          &:hover {
            background: @rm-accent;
            color: white !important;
            text-decoration: none;
          }
        }
      }
    }
  }
  .sidebar-enabled();

  // Mixin: Override to icon style when selected
  .sidebar-icon-override() when (@sidebar-tab-style = "icon") {
    #sidebar:before {
      content: "â—€" !important;
      left: -25px !important;
      width: 20px !important;
      text-align: center !important;
      font-size: 16px !important;
    }
  }
  .sidebar-icon-override();

  /* Colored Assignees - DIMMED for Dark Mode so they don't blind you */
  select#issue_assigned_to_id {
    background-color: @rm-bg-tertiary !important;
    color: @rm-text-primary !important;

    option {
      /* Default option color */
      background-color: @rm-bg-main;
      color: @rm-text-primary;

      /* specific users */
      &[value="84"] {
        background: #502;
        color: #f99;
        font-weight: bold;
      }
      &[value="208"],
      &[value="21"],
      &[value="216"],
      &[value="36"] {
        background: #130;
        color: #6f6;
        font-weight: bold;
      }
      &[value="234"],
      &[value="259"] {
        background: #025;
        color: #9cf;
        font-weight: bold;
      }
      &[value="200"] {
        background: #420;
        color: #fa0;
        font-weight: bold;
      }
    }
  }

  /* History Details Text */
  [id*="change"] [id*="note"] ul.details li i {
    color: @rm-text-primary !important;
    font-weight: bold !important;
    font-style: normal !important;
  }

  .wiki-preview {
    background-color: @rm-bg-secondary;
    border-color: @rm-border;
  }
  div.wiki *:not(pre)>code, div.wiki>code {
    color: white !important;
    background: #484848 !important;
    padding: 0.1em 0.3em;
    border-radius: 0.3em;
    text-shadow: 1px 1px 2px rgba(0, 0, 0, .8);
  }
  legend {
    color: @rm-text-primary;
  }
  .edit_issue .box {
    background: #1d242e !important;
  }

  /************* Neon Dark Syntax Highlighting *************/

  .syntaxhl {
    background: #111111;
    color: #e8e8e8;
  }

  /* Highlighted line */
  .syntaxhl .hll {
    background-color: #222222;
  }

  /* Comments â€“ soft, unobtrusive */
  .syntaxhl .c,
  .syntaxhl .ch,
  .syntaxhl .cm,
  .syntaxhl .cpf,
  .syntaxhl .c1 {
    color: #777777;
  }

  .syntaxhl .cp {
    color: #66aaff;
  }

  .syntaxhl .cs {
    color: #ff5555;
    font-weight: bold;
  }

  /* Errors */
  .syntaxhl .err,
  .syntaxhl .gr,
  .syntaxhl .ne {
    color: #ff3366;
    background-color: #330014;
    font-weight: bold;
  }

  /* Keywords â€“ neon green */
  .syntaxhl .k,
  .syntaxhl .kc,
  .syntaxhl .kd,
  .syntaxhl .kn,
  .syntaxhl .kr {
    color: #66ff55;
    font-weight: bold;
  }

  .syntaxhl .kp {
    color: #55ddff;
    font-weight: bold;
  }

  .syntaxhl .kt {
    color: #b066ff;
    font-weight: bold;
  }

  /* Operators */
  .syntaxhl .o {
    color: #e8e8e8;
  }

  .syntaxhl .ow {
    color: #ffffff;
    font-weight: bold;
  }

  /* Numbers â€“ neon purple/blue */
  .syntaxhl .m,
  .syntaxhl .mb,
  .syntaxhl .mf,
  .syntaxhl .mh,
  .syntaxhl .mi,
  .syntaxhl .mo,
  .syntaxhl .il {
    color: #9966ff;
    font-weight: bold;
  }

  /* Strings â€“ neon pink/orange */
  .syntaxhl .s,
  .syntaxhl .sa,
  .syntaxhl .sb,
  .syntaxhl .dl,
  .syntaxhl .s2,
  .syntaxhl .s1,
  .syntaxhl .sh {
    color: #ff99aa;
  }

  .syntaxhl .sd {
    color: #ff7744;
  }

  .syntaxhl .se {
    color: #ff5599;
    font-weight: bold;
  }

  .syntaxhl .si {
    color: #bbbbbb;
  }

  .syntaxhl .sx {
    color: #ff5544;
  }

  .syntaxhl .sr {
    color: #ffffff;
    background-color: #331133;
  }

  /* Names, identifiers */
  .syntaxhl .na {
    color: #33bbff;
  }

  .syntaxhl .nb,
  .syntaxhl .bp {
    color: #55ffaa;
  }

  .syntaxhl .nc {
    color: #ff66cc;
    font-weight: bold;
  }

  .syntaxhl .no {
    color: #88ddff;
    font-weight: bold;
  }

  .syntaxhl .nd {
    color: #cccccc;
    font-weight: bold;
  }

  .syntaxhl .ni {
    color: #ff2255;
    font-weight: bold;
  }

  .syntaxhl .nf,
  .syntaxhl .fm {
    color: #66ccff;
    font-weight: bold;
  }

  .syntaxhl .nl {
    color: #e6b800;
    font-weight: bold;
  }

  .syntaxhl .nn {
    color: #33ccee;
    font-weight: bold;
  }

  .syntaxhl .nt {
    color: #55ff88;
  }

  .syntaxhl .nv,
  .syntaxhl .vm {
    color: #ffdd88;
  }

  .syntaxhl .vg {
    color: #ffaa55;
    font-weight: bold;
  }

  .syntaxhl .vi {
    color: #8899ff;
  }

  /* Generic */
  .syntaxhl .gd {
    color: #ff5555;
  }

  .syntaxhl .ge {
    font-style: italic;
  }

  .syntaxhl .gh {
    color: #89cfff;
    font-weight: bold;
  }

  .syntaxhl .gi {
    color: #33ff88;
  }

  .syntaxhl .go {
    color: #888888;
  }

  .syntaxhl .gp {
    color: #ffaa33;
    font-weight: bold;
  }

  .syntaxhl .gs {
    font-weight: bold;
  }

  .syntaxhl .gu {
    color: #cc66ff;
    font-weight: bold;
  }

  .syntaxhl .gt {
    color: #55aaff;
  }

  .syntaxhl .w {
    color: #555555;
  }

  /* Highlighted line */
  .syntaxhl .hll {
    background-color: #222222 !important;
  }

  /* Error background */
  .syntaxhl .err {
    background-color: #330014 !important;
  }

  /* String backgrounds (were #fff0f0 etc.) */
  .syntaxhl .s,
  .syntaxhl .sa,
  .syntaxhl .sb,
  .syntaxhl .dl,
  .syntaxhl .s2,
  .syntaxhl .s1,
  .syntaxhl .sh {
    background-color: #1a1214 !important;
  }

  /* String escape â€“ previously bright pinkish background */
  .syntaxhl .se {
    background-color: #1a1214 !important;
  }

  /* String Other â€“ was #fff0f0 */
  .syntaxhl .sx {
    background-color: #1a1214 !important;
  }

  /* Regex â€“ was #fff0ff */
  .syntaxhl .sr {
    background-color: #1a1120 !important;
  }

  /* Interpolated string â€“ was #eeeeee */
  .syntaxhl .si {
    background-color: #1a1a1a !important;
  }

  // login screen
  #login-form {
    background-color: @rm-bg-tertiary;
    border-color: @rm-border;
    input[type="text"] {
      background-color: @rm-input-bg !important;
    }
  }
  input[type="submit"] {
    background-color: @rm-bg-tertiary;
    color: @rm-text-primary;
    border-color: @rm-border;
    border-style: solid;
    position: relative;
    &:hover {
      background-color: @rm-bg-secondary;
    }
    &:active {
      background-color: @rm-bg-tertiary;
      top: 1px;
    }
  }
  #context-menu {
    ul {
      background-color: @rm-bg-main;
      border-color: @rm-border;
      li {
        border-color: @rm-bg-main;
        &:hover {
          background-color: @rm-bg-tertiary;
          border-color: @rm-border;
        }
      }
    }
  }
  .drdn, #project-jump {
    .drdn-trigger {
      background-color: @rm-bg-main;
      border-color: @rm-border;
      color: @rm-text-primary;
    }
    .drdn-content {
      background-color: @rm-bg-main;
      border-color: @rm-border;
      a {
        border: none;
        color: @rm-text-primary !important;
        span {
          color: @rm-text-primary;
        }
        &:hover {
          background-color: @rm-accent;
          border-color: transparent;
          span {
            color: @rm-bg-primary;
            font-weight: bold;
          }
        }
      }
      strong {
        border: none;
        text-transform: uppercase;
        background-color: @rm-bg-secondary;
        color: @rm-text-secondary !important;
      }
    }
    div + .drdn-items {
      border-color: @rm-border;
    }
  }

  div.flash.error, #errorExplanation {
    background-color: #ffe3e3;
    border-color: #d88;
    color: #880000;
  }
  div.flash {
    font-weight: bold;
  }
  div.flash.notice {
    background-color: #131;
    border-color: #86f486;
    color: #96f896;
  }

  div.flash.warning, .conflict {

    background-color: #F3EDD1;
    border-color: #eadbbc;
    color: #A6750C;
    text-align: left;
  }

  .nodata, .warning {
    text-align: center;
    background-color: #F3EDD1;
    border-color: #eadbbc;
    color: #A6750C;
  }

  .pagination ul.pages li {
    border-color: @rm-border !important;
    &:hover:has(a) {
      a {
        color: lighten(@rm-accent, 40%) !important;
      }
      border-color: @rm-accent !important;
      background-color: mix(@rm-accent, black, 60%) !important;
    }
    &.current {
      background-color: @rm-accent !important;
      font-weight: bold !important;
    }
  }

  /* three dot menu icon */
  .js-contextmenu, .icon-actions {
    background-image: none;
    padding-left: 0;
    width: 16px;
    font-size: 0;

    &:before {
      content: "â‹¯";
      color: white;
      display: block;
      font-size: 14px;
    }
    &:hover {
      text-decoration: none;
      &:before {
        color: lighten(@rm-accent, 30%);
      }
    }
  }

  #issue_fixed_version_id option {
    &[style] {
      background: @rm-bg-tertiary !important;
    }
  }

  select[multiple="multiple"] {
    option {
      border: none;

    }
  }
  input[type="date"] {
    background: @rm-input-bg !important;
    border-color: @rm-border;
    color: @rm-text-primary;

    // Webkit/Chrome calendar icon
    &::-webkit-calendar-picker-indicator {
      filter: invert(0.8) brightness(1.2);
      cursor: pointer;

      &:hover {
        filter: invert(0.9) brightness(1.4);
      }
    }

    // Firefox calendar icon
    &::-moz-calendar-picker-indicator {
      filter: invert(0.8) brightness(1.2);
    }
  }

  input[type="file"] {
    color: @rm-text-primary !important;

    // Webkit/Chrome file button
    &::file-selector-button {
      background-color: @rm-bg-tertiary;
      color: @rm-text-primary;
      border: 1px solid @rm-border;
      border-radius: 3px;
      margin-right: 10px;
      cursor: pointer;

      &:hover {
        background-color: lighten(@rm-bg-tertiary, 5%);
      }
    }

    // Firefox file button
    &::-webkit-file-upload-button {
      background-color: @rm-bg-tertiary;
      color: @rm-text-primary;
      border: 1px solid @rm-border;
      cursor: pointer;

      &:hover {
        background-color: lighten(@rm-bg-tertiary, 5%);
      }
    }
  }


  table.list:not(.odd-even) tbody tr:nth-child(odd),
  .odd,
  #issue-changesets div.changeset:nth-child(odd) {
    background-color: @rm-bg-primary;
  }
   table.list:not(.odd-even) tbody tr:nth-child(even),
  .even, #issue-changesets div.changeset:nth-child(even) {
      background-color: @rm-bg-secondary;
  }

}
